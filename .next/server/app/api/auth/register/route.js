"use strict";(()=>{var e={};e.id=612,e.ids=[612],e.modules={6037:e=>{e.exports=require("mongoose")},846:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9294:e=>{e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},9428:e=>{e.exports=require("buffer")},5511:e=>{e.exports=require("crypto")},7910:e=>{e.exports=require("stream")},8354:e=>{e.exports=require("util")},3881:(e,t,r)=>{r.r(t),r.d(t,{patchFetch:()=>k,routeModule:()=>x,serverHooks:()=>f,workAsyncStorage:()=>g,workUnitAsyncStorage:()=>Y});var a={};r.r(a),r.d(a,{POST:()=>h,runtime:()=>j});var i=r(1271),n=r(1232),o=r(8079),s=r(3418),u=r(9999),p=r(9902),d=r(2171),l=r(4807),m=r(3947),c=r(7391);let j="nodejs";async function h(e){try{await (0,s.T)();let t=await e.json(),{name:r,email:a,password:i}=l.zK.parse(t),n=await u.KJ.findOne({email:a}).lean();if(console.log(n,"ini email",n),n)throw new m.v7("Email sudah terdaftar");let o=await (0,p.E)(i),j=await u.KJ.create({name:r,email:a,password_hash:o,roles:["customer"],status:"active"}),h=(0,d.zF)({sub:String(j._id),roles:j.roles}),x=new Headers;return x.append("Set-Cookie",(0,c.BH)(h)),(0,m.Pq)({user:{_id:j._id,name:j.name,email:j.email,roles:j.roles}},{status:201,headers:x})}catch(e){if(e?.code===11e3&&e?.keyPattern?.email)return(0,m.Pq)({error:"Email sudah terdaftar"},{status:400});return(0,m.hS)(e)}}let x=new i.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/auth/register/route",pathname:"/api/auth/register",filename:"route",bundlePath:"app/api/auth/register/route"},resolvedPagePath:"C:\\Users\\imamb\\Desktop\\QuickCart\\apps\\backend\\app\\api\\auth\\register\\route.js",nextConfigOutput:"",userland:a}),{workAsyncStorage:g,workUnitAsyncStorage:Y,serverHooks:f}=x;function k(){return(0,o.patchFetch)({workAsyncStorage:g,workUnitAsyncStorage:Y})}},7391:(e,t,r)=>{function a(e,t=604800){return[`gt_auth=${encodeURIComponent(e)}`,"Path=/","HttpOnly","SameSite=Lax","Secure",`Max-Age=${t}`].filter(Boolean).join("; ")}function i(){return["gt_auth=","Path=/","HttpOnly","SameSite=Lax","Secure","Expires=Thu, 01 Jan 1970 00:00:00 GMT"].filter(Boolean).join("; ")}r.d(t,{BH:()=>a,OB:()=>i})},4807:(e,t,r)=>{r.d(t,{X5:()=>i,ie:()=>o,zK:()=>n});var a=r(6063);let i=a.Ik({email:a.Yj().email().toLowerCase(),password:a.Yj().min(6)}),n=a.Ik({name:a.Yj().min(2),email:a.Yj().email().toLowerCase(),password:a.Yj().min(6)});a.Ik({productId:a.Yj().min(1),userId:a.Yj().min(1),rating:a.ai().min(1).max(5),title:a.Yj().optional(),content:a.Yj().optional(),status:a.k5(["pending","published","rejected"]).optional()});let o=a.Ik({items:a.YO(a.Ik({productId:a.Yj().min(1),variantId:a.Yj().min(1),sku:a.Yj().min(1),qty:a.ai().int().positive()})).min(1),shippingAddress:a.Ik({receiverName:a.Yj().min(1),phone:a.Yj().min(6),street:a.Yj().min(3),subdistrict:a.Yj().min(1),city:a.Yj().min(1),province:a.Yj().min(1),postalCode:a.Yj().min(3),country:a.Yj().default("ID")}),billingAddress:a.bz().optional(),shippingCost:a.ai().nonnegative().default(0),tax:a.ai().nonnegative().default(0),note:a.Yj().max(500).optional(),paymentMethod:a.Yj().default("manual"),channel:a.Yj().default("web")})}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[79,388,365,483,63,795],()=>r(3881));module.exports=a})();